{% load static %}
<!doctype html>
<html lang="en" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <title>Storefront</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="stylesheet" href="{% static 'products/style.css' %}">
  </head>
  <body>
    <header class="sf-header" role="banner">
      <div class="brand" aria-label="Site brand">Legacy<span class="accent">Shop</span></div>
      <nav aria-label="Primary" class="header-actions">
        <button id="themeToggle" class="btn" aria-pressed="false" aria-label="Toggle light or dark theme">Theme</button>
        <button id="postAdBtn" class="btn primary" aria-haspopup="dialog">Post Ad</button>
        <button id="viewToggle" class="btn" aria-pressed="false" aria-label="Toggle list or grid view">List view</button>
        <button id="infToggle" class="btn" aria-pressed="false" aria-label="Toggle infinite scroll">Auto load</button>
        <div id="authZone">
          <button id="loginBtn" class="btn" aria-haspopup="dialog">Sign in</button>
          <button id="registerBtn" class="btn" aria-haspopup="dialog">Create account</button>
        </div>
      </nav>
    </header>
    <main class="container layout">
      <aside class="sidebar" aria-label="Categories">
        <h3>Categories</h3>
        <ul id="catList" class="cat-list"></ul>
      </aside>
      <section class="toolbar" role="region" aria-label="Filters">
        <div class="searchbar">
          <input id="searchInput" class="input search" placeholder="Search in all categories" aria-label="Search products" />
          <select id="categoryFilter" class="select cat-select" aria-label="Filter by category"><option value="">All categories</option></select>
          <button id="searchBtn" class="btn">Search</button>
        </div>
        <div class="filters">
          <input id="minPrice" type="number" step="0.01" class="input" placeholder="Min $" aria-label="Minimum price" />
          <input id="maxPrice" type="number" step="0.01" class="input" placeholder="Max $" aria-label="Maximum price" />
          <input id="locationInput" class="input" placeholder="Location" aria-label="Filter by location" />
          <label class="chk"><input type="checkbox" id="negotiableOnly" /> Negotiable only</label>
          <select id="sortSelect" class="select" aria-label="Sort products">
            <option value="-created_at">Newest</option>
            <option value="price">Price: Low → High</option>
            <option value="-price">Price: High → Low</option>
            <option value="name">Name A–Z</option>
          </select>
          <button id="clearFilters" class="btn" type="button">Clear</button>
          <button id="newProductBtn" class="btn" hidden aria-haspopup="dialog">Post Ad</button>
          <button id="newCategoryBtn" class="btn" hidden aria-haspopup="dialog">New category</button>
        </div>
        <div id="activeFilters" class="active-filters" aria-label="Active filters" hidden></div>
      </section>
  <div id="grid" class="grid skeleton" role="list" aria-busy="true" aria-live="polite"></div>
      <div id="sentinel" aria-hidden="true"></div>
      <div class="pagination" id="pagination" hidden>
        <button class="btn" id="prevPage">Prev</button>
        <ul id="pageNumbers" class="page-numbers" aria-label="Pagination"></ul>
        <button class="btn" id="nextPage">Next</button>
      </div>
    </main>
    <template id="cardTemplate">
      <article class="card" role="listitem" tabindex="0">
        <div class="img-wrap" aria-hidden="true">
          <img class="card-img" alt="" />
        </div>
        <div class="card-body">
          <h3 class="card-title"></h3>
          <div class="card-meta">
            <span class="chip cat" hidden></span>
            <span class="time" aria-label="Posted time"></span>
          </div>
          <p class="card-desc"></p>
          <div class="card-bottom">
            <span class="price" aria-label="Price"></span>
            <button class="btn details" type="button">Details</button>
          </div>
        </div>
      </article>
    </template>

    <div id="modalRoot"></div>

    <!-- Toasts: live region for non-blocking notifications -->
    <div id="toastContainer" class="toasts" aria-live="polite" aria-atomic="true"></div>

    <script src="{% static 'products/storefront.js' %}"></script>
  </body>
</html>
